// Translations for the Math Fun app
const translations = {
    en: {
        // Header
        title: "ðŸŽ¯ Math Fun - Add to 20! ðŸŽ¯",
        scoreLabel: "Score:",
        streakLabel: "Streak:",
        totalLabel: "Total:",
        
        // Question
        whatIs: "What is",
        plus: "+",
        questionMark: "?",
        
        // Input
        inputPlaceholder: "Type your answer",
        submitButton: "Check Answer",
        
        // Progress
        progressTitle: "Your Progress ðŸ“Š",
        correctText: "correct out of",
        attemptsText: "attempts",
        
        // History
        historyTitle: "Recent Answers ðŸ“",
        noAttemptsYet: "No attempts yet. Start solving!",
        
        // Footer
        resetButton: "Reset Progress",
        
        // Feedback messages
        enterNumber: "Please enter a number! ðŸ¤”",
        excellent: "Excellent! ðŸŒŸ",
        perfect: "Perfect! ðŸŽ‰",
        amazing: "Amazing! ðŸŽŠ",
        greatJob: "Great job! ðŸ‘",
        wonderful: "Wonderful! ðŸŽ¯",
        youreAStar: "You're a star! â­",
        tryAgain: "Try again! ðŸ’ª",
        keepPracticing: "Keep practicing! ðŸŽˆ",
        nextTime: "You'll get it next time! ðŸŒˆ",
        dontGiveUp: "Don't give up! ðŸš€",
        theAnswerIs: "The answer is",
        
        // Alerts
        resetConfirm: "Are you sure you want to reset all progress? This cannot be undone!",
        resetComplete: "Progress reset! Start fresh! ðŸŽˆ"
    },
    bg: {
        // Header
        title: "ðŸŽ¯ Ð—Ð°Ð±Ð°Ð²Ð½Ð° Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐ° - Ð¡ÑŠÐ±Ð¸Ñ€Ð°Ð½Ðµ Ð´Ð¾ 20! ðŸŽ¯",
        scoreLabel: "Ð¢Ð¾Ñ‡ÐºÐ¸:",
        streakLabel: "ÐŸÐ¾Ñ€ÐµÐ´Ð¸Ñ†Ð°:",
        totalLabel: "ÐžÐ±Ñ‰Ð¾:",
        
        // Question
        whatIs: "ÐšÐ¾Ð»ÐºÐ¾ Ðµ",
        plus: "+",
        questionMark: "?",
        
        // Input
        inputPlaceholder: "ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€Ð°",
        submitButton: "ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€Ð°",
        
        // Progress
        progressTitle: "Ð¢Ð²Ð¾ÑÑ‚ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑ ðŸ“Š",
        correctText: "Ð²ÐµÑ€Ð½Ð¸ Ð¾Ñ‚",
        attemptsText: "Ð¾Ð¿Ð¸Ñ‚Ð°",
        
        // History
        historyTitle: "ÐŸÐ¾ÑÐ»ÐµÐ´Ð½Ð¸ Ð¾Ñ‚Ð³Ð¾Ð²Ð¾Ñ€Ð¸ ðŸ“",
        noAttemptsYet: "Ð’ÑÐµ Ð¾Ñ‰Ðµ Ð½ÑÐ¼Ð° Ð¾Ð¿Ð¸Ñ‚Ð¸. Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð´Ð° Ñ€ÐµÑˆÐ°Ð²Ð°Ñˆ!",
        
        // Footer
        resetButton: "ÐÑƒÐ»Ð¸Ñ€Ð°Ð¹ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÐ°",
        
        // Feedback messages
        enterNumber: "ÐœÐ¾Ð»Ñ, Ð²ÑŠÐ²ÐµÐ´Ð¸ Ñ‡Ð¸ÑÐ»Ð¾! ðŸ¤”",
        excellent: "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾! ðŸŒŸ",
        perfect: "ÐŸÐµÑ€Ñ„ÐµÐºÑ‚Ð½Ð¾! ðŸŽ‰",
        amazing: "ÐÐµÐ²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾! ðŸŽŠ",
        greatJob: "Ð¡Ñ‚Ñ€Ð°Ñ…Ð¾Ñ‚Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ð°! ðŸ‘",
        wonderful: "Ð§ÑƒÐ´ÐµÑÐ½Ð¾! ðŸŽ¯",
        youreAStar: "Ð¢Ð¸ ÑÐ¸ Ð·Ð²ÐµÐ·Ð´Ð°! â­",
        tryAgain: "ÐžÐ¿Ð¸Ñ‚Ð°Ð¹ Ð¿Ð°Ðº! ðŸ’ª",
        keepPracticing: "ÐŸÑ€Ð¾Ð´ÑŠÐ»Ð¶Ð°Ð²Ð°Ð¹ Ð´Ð° Ð¿Ñ€Ð°ÐºÑ‚Ð¸ÐºÑƒÐ²Ð°Ñˆ! ðŸŽˆ",
        nextTime: "Ð¡Ð»ÐµÐ´Ð²Ð°Ñ‰Ð¸ÑÑ‚ Ð¿ÑŠÑ‚ Ñ‰Ðµ ÑƒÑÐ¿ÐµÐµÑˆ! ðŸŒˆ",
        dontGiveUp: "ÐÐµ ÑÐµ Ð¾Ñ‚ÐºÐ°Ð·Ð²Ð°Ð¹! ðŸš€",
        theAnswerIs: "ÐžÑ‚Ð³Ð¾Ð²Ð¾Ñ€ÑŠÑ‚ Ðµ",
        
        // Alerts
        resetConfirm: "Ð¡Ð¸Ð³ÑƒÑ€ÐµÐ½ Ð»Ð¸ ÑÐ¸, Ñ‡Ðµ Ð¸ÑÐºÐ°Ñˆ Ð´Ð° Ð½ÑƒÐ»Ð¸Ñ€Ð°Ñˆ Ñ†ÐµÐ»Ð¸Ñ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑ? Ð¢Ð¾Ð²Ð° Ð½Ðµ Ð¼Ð¾Ð¶Ðµ Ð´Ð° Ð±ÑŠÐ´Ðµ Ð¾Ñ‚Ð¼ÐµÐ½ÐµÐ½Ð¾!",
        resetComplete: "ÐŸÑ€Ð¾Ð³Ñ€ÐµÑÑŠÑ‚ Ðµ Ð½ÑƒÐ»Ð¸Ñ€Ð°Ð½! Ð—Ð°Ð¿Ð¾Ñ‡Ð½Ð¸ Ð¾Ñ‚Ð½Ð°Ñ‡Ð°Ð»Ð¾! ðŸŽˆ"
    }
};

// Default language
let currentLanguage = 'en';

// Function to get translation
function t(key) {
    return translations[currentLanguage][key] || translations.en[key] || key;
}

// Function to set language
function setLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('mathFunLanguage', lang);
    updateUIText();
}

// Function to load saved language
function loadLanguage() {
    const saved = localStorage.getItem('mathFunLanguage');
    if (saved && translations[saved]) {
        currentLanguage = saved;
    }
}

// Function to update UI text
function updateUIText() {
    // Update HTML lang attribute
    document.documentElement.lang = currentLanguage;
    
    // Update title
    document.title = t('title').replace(/ðŸŽ¯/g, '').trim();
    
    // Update header
    document.querySelector('h1').textContent = t('title');
    document.querySelectorAll('.stat-label')[0].textContent = t('scoreLabel');
    document.querySelectorAll('.stat-label')[1].textContent = t('streakLabel');
    document.querySelectorAll('.stat-label')[2].textContent = t('totalLabel');
    
    // Update input placeholder
    document.getElementById('answer').placeholder = t('inputPlaceholder');
    document.getElementById('submitBtn').textContent = t('submitButton');
    
    // Update progress section
    document.querySelector('.progress-section h3').textContent = t('progressTitle');
    
    // Update history section
    document.querySelector('.history-section h3').textContent = t('historyTitle');
    
    // Update reset button
    document.getElementById('resetBtn').textContent = t('resetButton');
    
    // Update question text
    updateQuestionText();
    
    // Update progress text
    updateProgressText();
    
    // Re-render history with new language
    renderHistory();
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.lang === currentLanguage);
    });
}

// Function to update question text
function updateQuestionText() {
    const num1 = document.getElementById('num1').textContent;
    const num2 = document.getElementById('num2').textContent;
    const questionElement = document.querySelector('.question');
    questionElement.innerHTML = `${t('whatIs')} <span id="num1">${num1}</span> ${t('plus')} <span id="num2">${num2}</span>${t('questionMark')}`;
}

// Function to update progress text
function updateProgressText() {
    const correct = document.getElementById('correct').textContent;
    const attempted = document.getElementById('attempted').textContent;
    const percentage = document.getElementById('percentage').textContent;
    const progressText = document.querySelector('.progress-text');
    progressText.innerHTML = `<span id="correct">${correct}</span> ${t('correctText')} <span id="attempted">${attempted}</span> ${t('attemptsText')} <span id="percentage">${percentage}</span>`;
}
